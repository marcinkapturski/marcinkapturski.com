name: Report test results on Slack

on:
  workflow_call:

jobs:
  report:
    name: Report results on Slack
    runs-on: ubuntu-latest
    if: always()
    env:
      SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}
    steps:
      - name: Checkout the repository
        uses: actions/checkout@v2

      - name: Slack notification
        if: always()
        run: |
          $(curl -X POST -H 'Content-type: application/json' --data '{"text":"Hello, World!"}' https://hooks.slack.com/services/${{ secrets.SLACK_WEBHOOK }})
